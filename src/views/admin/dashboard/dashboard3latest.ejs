<%- include('../../partials/head.ejs') -%>
  <div class="page-container">
    <style>
      :root {
        --admin-theme-color: <%=adminThemeColor %>;
      }
    </style>
    <!-- style start -->
    <!-- style end -->
    <!-- navbar start -->
    <%- include('../../partials/navbar.ejs') -%>
      <!-- navbar end -->
      <!-- sidebar start -->
      <%- include('../../partials/sidebar.ejs') -%>
        <!-- sidebar end -->
        <!-- JS start -->
        <!-- start js include path -->
        <%- include('../../partials/footer.ejs')-%>
          <!-- JS end -->
          <!-- Page start -->
          <%- include('../../pages/dashboard/dashboard.ejs') -%>
            <!-- Page end -->
            <style>
              .apexcharts-toolbar {
                display: none;
              }
            </style>

            <script src="/public/admin/bundles/apexcharts/apexcharts.min.js"></script>
            <!-- Include moment.js from CDN -->
            <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>

            <!-- Inside the JavaScript script tag -->
            <script>
              "use strict";
              $(function () {
                // Call chart rendering function initially
                chart8();

                // Add event listener for tab change
                // $(".mdl-tabs__tab tab1").on("click", function () {
                //   // Render charts when a tab is clicked
                //   chart8();
                // });
                $(document).on("click", ".mdl-tabs__tab tab1", function () {
                  // Render charts when a tab is clicked
                  chart8();
                });
              });

              function chart8() {
                var options = {
                  chart: {
                    height: 350,
                    type: "bar",
                  },
                  plotOptions: {
                    bar: {
                      dataLabels: {
                        position: "top", // top, center, bottom
                      },
                    },
                  },
                  dataLabels: {
                    enabled: true,
                    formatter: function (val) {
                      return val;
                    },
                    offsetY: -20,
                    style: {
                      fontSize: "14px",
                      colors: ["#9aa0ac"],
                    },
                  },
                  series: [
                    {
                      name: "New User Sign-Ups",
                      data: [
                        '<%- lastWeekNewUserSignups.last_week_total %>',
                        '<%- newUserweek.week_total %>',

                      ],
                    },
                  ],
                  xaxis: {
                    type: "category",
                    categories: [
                      'Last Week (<%= `${lastWeekStartDate} - ${lastWeekEndDate}` %>)',
                      'This Week (<%= `${currentWeekStartDate} - ${ currentWeekEndDate}` %>)',

                    ],
                    position: "bottom",
                    labels: {
                      style: {
                        fontSize: "13px",
                        colors: "#9aa0ac",
                      },
                    },
                    labels: {
                      style: {
                        fontSize: "13px",
                        colors: "#9aa0ac",
                      },
                      offsetY: -5,
                    },
                    axisBorder: {
                      show: true,
                    },
                    axisTicks: {
                      show: false,
                    },
                    crosshairs: {
                      fill: {
                        type: "gradient",
                        gradient: {
                          colorFrom: "#D8E3F0",
                          colorTo: "#BED1E6",
                          stops: [0, 100],
                          opacityFrom: 0.4,
                          opacityTo: 0.5,
                        },
                      },
                    },
                    tooltip: {
                      enabled: true,
                      offsetY: -35,
                    },
                  },
                  fill: {
                    gradient: {
                      shade: "light",
                      type: "horizontal",
                      shadeIntensity: 0.25,
                      gradientToColors: undefined,
                      inverseColors: true,
                      opacityFrom: 1,
                      opacityTo: 1,
                      stops: [50, 0, 100, 100],
                    },
                  },
                  yaxis: {
                    axisBorder: {
                      show: false,
                    },
                    axisTicks: {
                      show: true,
                    },
                    title: {
                      text: "New User Sign-Ups",
                      style: {
                        fontSize: "14px",
                        color: "#9aa0ac",
                      },
                    },
                    labels: {
                      show: true,
                      formatter: function (val) {
                        return val;
                      },
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                    },
                  },
                  title: {
                    // text: "",
                    floating: true,
                    offsetY: 330,
                    align: "center",
                    style: {
                      fontSize: "14px",
                      color: "#9aa0ac",
                    },
                  },
                  tooltip: {
                    theme: "dark",
                    marker: {
                      show: true,
                    },
                    x: {
                      show: true,
                    },
                  },
                };
                var options3 = {
                  chart: {
                    height: 350,
                    type: "bar",
                  },
                  plotOptions: {
                    bar: {
                      dataLabels: {
                        position: "top", // top, center, bottom
                      },
                    },
                  },
                  dataLabels: {
                    enabled: true,
                    formatter: function (val) {
                      return val;
                    },
                    offsetY: -20,
                    style: {
                      fontSize: "14px",
                      colors: ["#9aa0ac"],
                    },
                  },
                  series: [
                    {
                      name: "New User Sign-Ups",
                      data: [
                        '<%- currentAndYesterdayUserSignups.yesterday %>',
                        '<%- currentAndYesterdayUserSignups.today %>',
                      ],
                    },
                  ],
                  xaxis: {
                    type: "category",
                    categories: [
                      'Yesterday (<%= yesterdayDate %>)',
                      'Today (<%= todayDate %>)',
                    ],
                    position: "bottom",
                    labels: {
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                    },
                    labels: {
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                      offsetY: -5,
                    },
                    axisBorder: {
                      show: true,
                    },
                    axisTicks: {
                      show: false,
                    },
                    crosshairs: {
                      fill: {
                        type: "gradient",
                        gradient: {
                          colorFrom: "#D8E3F0",
                          colorTo: "#BED1E6",
                          stops: [0, 100],
                          opacityFrom: 0.4,
                          opacityTo: 0.5,
                        },
                      },
                    },
                    tooltip: {
                      enabled: true,
                      offsetY: -35,
                    },
                  },
                  fill: {
                    gradient: {
                      shade: "light",
                      type: "horizontal",
                      shadeIntensity: 0.25,
                      gradientToColors: undefined,
                      inverseColors: true,
                      opacityFrom: 1,
                      opacityTo: 1,
                      stops: [50, 0, 100, 100],
                    },
                  },
                  yaxis: {
                    axisBorder: {
                      show: false,
                    },
                    axisTicks: {
                      show: true,
                    },
                    title: {
                      text: "New User Sign-Ups",
                      style: {
                        fontSize: "14px",
                        color: "#9aa0ac",
                      },
                    },
                    labels: {
                      show: true,
                      formatter: function (val) {
                        return val;
                      },
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                    },
                  },
                  title: {
                    // text: "",
                    floating: true,
                    offsetY: 330,
                    align: "center",
                    style: {
                      color: "#9aa0ac",
                    },
                  },
                  tooltip: {
                    theme: "dark",
                    marker: {
                      show: true,
                    },
                    x: {
                      show: true,
                    },
                  },
                };
                var options2 = {
                  chart: {
                    height: 350,
                    type: "bar",
                  },
                  plotOptions: {
                    bar: {
                      dataLabels: {
                        position: "top", // top, center, bottom
                      },
                    },
                  },
                  dataLabels: {
                    enabled: true,
                    formatter: function (val) {
                      return val;
                    },
                    offsetY: -20,
                    style: {
                      fontSize: "14px",
                      colors: ["#9aa0ac"],
                    },
                  },
                  series: [
                    {
                      name: "New User Sign-Ups",
                      data: [
                        '<%- lastMonthAndThisMonthUserSignups.last_month || 0 %>',
                        '<%- lastMonthAndThisMonthUserSignups.this_month || 0 %>',
                      ],
                    },
                  ],
                  xaxis: {
                    type: "category",
                    categories: [
                      'Last Month (<%= lastMonthNameWithYear %>)',
                      'This Month (<%= currentMonthNameWithYear %>)',
                    ],
                    labels: {
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                    },
                  },
                  fill: {
                    gradient: {
                      shade: "light",
                      type: "horizontal",
                      shadeIntensity: 0.25,
                      gradientToColors: undefined,
                      inverseColors: true,
                      opacityFrom: 1,
                      opacityTo: 1,
                      stops: [50, 0, 100, 100],
                    },
                  },
                  yaxis: {
                    axisBorder: {
                      show: false,
                    },
                    axisTicks: {
                      show: true,
                    },
                    title: {
                      text: "New User Sign-Ups",
                      style: {
                        fontSize: "14px",
                        color: "#9aa0ac",
                      },
                    },
                    labels: {
                      show: true,
                      formatter: function (val) {
                        return val;
                      },
                      style: {
                        fontSize: "14px",
                        colors: "#9aa0ac",
                      },
                    },
                  },
                  title: {
                    floating: true,
                    offsetY: 330,
                    align: "center",
                    style: {
                      fontSize: "14px",
                      color: "#9aa0ac",
                    },
                  },
                  tooltip: {
                    theme: "dark",
                    marker: {
                      show: true,
                    },
                    x: {
                      show: true,
                    },
                  },
                };

                var chart1 = new ApexCharts(document.querySelector("#thisWeekSignup"), options);
                var chart2 = new ApexCharts(document.querySelector("#monthlySignup"), options2);
                var chart3 = new ApexCharts(document.querySelector("#lastWeekSignup"), options3);

                chart1.render();
                chart2.render();
                chart3.render();
              }
            </script>